{% extends 'tracker/base.html' %}
{% load staticfiles %}
{% load static %}
{% block title %}Set exam scores{% endblock title %}
{% block description %}
    Editing the scores for {{ student}} of test {{ sitting.exam }} on {{ sitting.datesat }}.
{% endblock description %}

{% block content %}
<form method="post">
{% csrf_token %}
{{ formset.management_form }}
{{ formset.media }}
    <table class="table w-auto">
        <thead>
        <tr>
            <th class="th-sm">Question</th>
            <th class="th-sm">Maximum score</th>
            <th class="th-sm">Score</th>
            <th class="th-sm">Syllabus Points</th>
            <th class="thlg" style="width: 70%">Notes</th>
        </tr>
        </thead>

        <tbody>
        {% for question, form in data %}
            <tr>
            <td>{{ question }}</td>
            <td>{{ question.maxscore }}</td>
            <td {% if form.errors %}class="danger"{% endif %}>
                {{ form.score }}{{ form.errors }}
                {% for field in form.hidden_fields %}
                    {{ field }}
                {% endfor %}
            </td>
            <td>
                {% for point in question.MPTTsyllabuspoint.all %}
                <button type="button" class="btn btn-info btn-xs" data-toggle="tooltip" data-placement="top" title="{{ point.text }}">{{ point.number }}</button>
                    {% endfor %}
             </td>

            <td>
                {{ form.notes }}
            </td>
            </tr>
        {% endfor %}
        <tr><td colspan="5"><button class="btn-primary" type="submit">Save</button>
</td></tr>
        </tbody>
    </table>
</form>
<br>
    <br>
    {% endblock content %}

{% block script %}
    {# for tooltips #}
    <script>
$(document).ready(function(){
    $('[data-toggle="tooltip"]').tooltip();
});
</script>

{% endblock script %}